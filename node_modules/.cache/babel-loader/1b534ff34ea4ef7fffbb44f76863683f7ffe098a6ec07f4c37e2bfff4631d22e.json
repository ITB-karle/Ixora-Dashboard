{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport { apiRequest } from '@/assets/js/apiRequest.js';\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nconst perPage = 10;\nexport default {\n  __name: 'MembersTable',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const memberList = ref([]);\n    const currentPage = ref(1);\n    const getMemberList = async () => {\n      try {\n        // Make API call to authenticate user\n        // Example using axios:\n        const response = await apiRequest('https://staging.itbrightsolution.com/ixora_backend/public/api/v1/user/list');\n        memberList.value = response.data.patients;\n      } catch (error) {\n        console.error('Login failed:', error);\n        // Handle login error\n      }\n    };\n    onMounted(() => {\n      getMemberList();\n    });\n\n    // Function to calculate the total number of pages\n    const totalPages = computed(() => Math.ceil(memberList.value.length / perPage));\n\n    // Function to get the subset of patients to display on the current page\n    const memberToDisplay = computed(() => {\n      const startIndex = (currentPage.value - 1) * perPage;\n      const endIndex = startIndex + perPage;\n      return memberList.value.slice(startIndex, endIndex);\n    });\n\n    // Function to navigate to a specific page\n    const goToPage = page => {\n      currentPage.value = page;\n    };\n\n    // Function to navigate to the next page\n    const nextPage = () => {\n      if (currentPage.value < totalPages.value) {\n        currentPage.value++;\n      }\n    };\n\n    // Function to navigate to the previous page\n    const prevPage = () => {\n      if (currentPage.value > 1) {\n        currentPage.value--;\n      }\n    };\n    const showModal = ref(false);\n    const userData = ref('');\n    const familyPatients = ref('');\n    const openModal = uuid => {\n      showModal.value = true;\n      getUserDetails(uuid);\n      getUserFamilyPatients(uuid);\n    };\n    const closeModal = () => {\n      showModal.value = false;\n    };\n    const getUserDetails = async uuid => {\n      try {\n        // Make API call to authenticate user\n        // Example using axios:\n        const response = await apiRequest(`https://staging.itbrightsolution.com/ixora_backend/public/api/v1/user/${uuid}/show`);\n        userData.value = response.data;\n      } catch (error) {\n        console.error('Get Data Failed', error);\n        // Handle login error\n      }\n    };\n    const getUserFamilyPatients = async uuid => {\n      try {\n        // Make API call to authenticate user\n        // Example using axios:\n        const response = await apiRequest(`https://staging.itbrightsolution.com/ixora_backend/public/api/v1/user/${uuid}/show_family_patients`);\n        familyPatients.value = response.data;\n      } catch (error) {\n        console.error('Get Data Failed', error);\n        // Handle login error\n      }\n    };\n    const __returned__ = {\n      memberList,\n      currentPage,\n      perPage,\n      getMemberList,\n      totalPages,\n      memberToDisplay,\n      goToPage,\n      nextPage,\n      prevPage,\n      showModal,\n      userData,\n      familyPatients,\n      openModal,\n      closeModal,\n      getUserDetails,\n      getUserFamilyPatients,\n      ref,\n      onMounted,\n      computed,\n      get apiRequest() {\n        return apiRequest;\n      },\n      ArgonButton\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","apiRequest","ArgonButton","perPage","memberList","currentPage","getMemberList","response","value","data","patients","error","console","totalPages","Math","ceil","length","memberToDisplay","startIndex","endIndex","slice","goToPage","page","nextPage","prevPage","showModal","userData","familyPatients","openModal","uuid","getUserDetails","getUserFamilyPatients","closeModal"],"sources":["C:/Users/chink/Documents/GitHub/ixora-dashboard/src/views/components/MembersTable.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { apiRequest } from '@/assets/js/apiRequest.js';\r\nimport ArgonButton from \"@/components/ArgonButton.vue\";\r\n\r\n  const memberList = ref([]);\r\n  const currentPage = ref(1);\r\n  const perPage = 10;\r\n\r\n  const getMemberList = async () => {\r\n    try {\r\n      // Make API call to authenticate user\r\n      // Example using axios:\r\n      const response = await apiRequest('https://staging.itbrightsolution.com/ixora_backend/public/api/v1/user/list');\r\n      memberList.value = response.data.patients;\r\n    } catch (error) {\r\n      console.error('Login failed:', error);\r\n      // Handle login error\r\n    }\r\n  };\r\n\r\n  onMounted(() => {\r\n    getMemberList();\r\n  });\r\n\r\n  // Function to calculate the total number of pages\r\n  const totalPages = computed(() => Math.ceil(memberList.value.length / perPage));\r\n\r\n  // Function to get the subset of patients to display on the current page\r\n  const memberToDisplay = computed(() => {\r\n    const startIndex = (currentPage.value - 1) * perPage;\r\n    const endIndex = startIndex + perPage;\r\n    return memberList.value.slice(startIndex, endIndex);\r\n  });\r\n\r\n  // Function to navigate to a specific page\r\n  const goToPage = (page) => {\r\n    currentPage.value = page;\r\n  };\r\n\r\n  // Function to navigate to the next page\r\n  const nextPage = () => {\r\n    if (currentPage.value < totalPages.value) {\r\n      currentPage.value++;\r\n    }\r\n  };\r\n\r\n  // Function to navigate to the previous page\r\n  const prevPage = () => {\r\n    if (currentPage.value > 1) {\r\n      currentPage.value--;\r\n    }\r\n  };\r\n\r\n  const showModal = ref(false);\r\n  const userData = ref('');\r\n  const familyPatients = ref('');\r\n\r\n  const openModal = (uuid) => {\r\n    showModal.value = true;\r\n    getUserDetails(uuid);\r\n    getUserFamilyPatients(uuid);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    showModal.value = false;\r\n  };\r\n\r\n  const getUserDetails = async (uuid) => {\r\n    try {\r\n      // Make API call to authenticate user\r\n      // Example using axios:\r\n      const response = await apiRequest(`https://staging.itbrightsolution.com/ixora_backend/public/api/v1/user/${uuid}/show`);\r\n      userData.value = response.data;\r\n    } catch (error) {\r\n      console.error('Get Data Failed', error);\r\n      // Handle login error\r\n    }\r\n  };\r\n\r\n  const getUserFamilyPatients = async (uuid) => {\r\n    try {\r\n      // Make API call to authenticate user\r\n      // Example using axios:\r\n      const response = await apiRequest(`https://staging.itbrightsolution.com/ixora_backend/public/api/v1/user/${uuid}/show_family_patients`);\r\n      familyPatients.value = response.data;\r\n    } catch (error) {\r\n      console.error('Get Data Failed', error);\r\n      // Handle login error\r\n    }\r\n  };\r\n\r\n</script>\r\n<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-header pb-0\">\r\n      <h6>Family List</h6>\r\n    </div>\r\n    <div class=\"card-body px-0 pt-0 pb-2\">\r\n      <div class=\"table-responsive p-0\">\r\n        <table class=\"table align-items-center mb-0\">\r\n          <thead>\r\n            <tr>\r\n              <th\r\n                class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n              >\r\n                Name\r\n              </th>\r\n              <th\r\n                class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2\"\r\n              >\r\n                Email\r\n              </th>\r\n              <th\r\n                class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2\"\r\n              >\r\n                Branch\r\n              </th>\r\n              <th\r\n                class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n              >\r\n                Updated At\r\n              </th>\r\n              <th\r\n                class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n              >\r\n                patient\r\n              </th>\r\n              <th class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\">edit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(member, index) in memberToDisplay\" :key=\"index\">\r\n              <td>\r\n                <div class=\"d-flex px-2 py-1\">\r\n                  <div>\r\n                    <img\r\n                      src=\"../../assets/img/team-2.jpg\"\r\n                      class=\"avatar avatar-sm me-3\"\r\n                      alt=\"user1\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"d-flex flex-column justify-content-center\">\r\n                    <h6 class=\"mb-0 text-sm\">{{ member.name }}</h6>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <p class=\"text-xs text-secondary mb-0\">\r\n                  {{ member.email }}\r\n                </p>\r\n              </td>\r\n              <td class=\"align-middle\">\r\n                <span class=\"text-secondary text-xs font-weight-bold\">{{ member.branch }}</span>\r\n              </td>\r\n              <td class=\"align-middle text-center text-sm\">\r\n                <span class=\"text-secondary text-xs font-weight-bold\">{{ member.updated_at }}</span>\r\n              </td>\r\n              <td class=\"align-middle text-center\">\r\n                <!-- <a\r\n                  v-if=\"member.patient_uuid\" \r\n                  :href=\"`edit-patient/?uuid=${member.patient_uuid}`\"\r\n                  class=\"text-secondary font-weight-bold text-xs\"\r\n                  data-toggle=\"tooltip\"\r\n                  data-original-title=\"Edit user\"\r\n                >\r\n                  <argon-button color=\"dark\">\r\n                    <i class=\"fas fa-pen\"></i>\r\n                  </argon-button>\r\n                </a> -->\r\n                <a\r\n                  v-if=\"member.patient_uuid\" \r\n                  @click=\"openModal(member.uuid)\"\r\n                  class=\"text-secondary font-weight-bold text-xs\"\r\n                  data-toggle=\"tooltip\"\r\n                  data-original-title=\"Edit user\"\r\n                >\r\n                  <argon-button color=\"dark\">\r\n                    <i class=\"fas fa-pen\"></i>\r\n                  </argon-button>\r\n                </a>\r\n                <a\r\n                  v-else\r\n                  :href=\"`create-patient/?uuid=${member.uuid}`\"\r\n                  class=\"text-secondary font-weight-bold text-xs\"\r\n                  data-toggle=\"tooltip\"\r\n                  data-original-title=\"add user\"\r\n                >\r\n                  <argon-button color=\"warning\">\r\n                    <i class=\"fas fa-plus\"></i>\r\n                  </argon-button>\r\n                </a>\r\n              </td>\r\n              <td class=\"align-middle text-center\">\r\n                <a\r\n                  :href=\"`edit-user/?uuid=${member.uuid}`\"\r\n                  class=\"text-secondary font-weight-bold text-xs\"\r\n                  data-toggle=\"tooltip\"\r\n                  data-original-title=\"Edit user\"\r\n                  >\r\n                  <argon-button color=\"light\">\r\n                    <i class=\"fas fa-pen\"></i>\r\n                  </argon-button>\r\n                </a>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <nav aria-label=\"Page navigation example\" class=\"my-3\">\r\n          <ul class=\"pagination justify-content-center\">\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n              <a class=\"page-link\" tabindex=\"-1\" @click=\"prevPage\">\r\n                <i class=\"fa fa-angle-left\"></i>\r\n                <span class=\"sr-only\">Previous</span>\r\n              </a>\r\n            </li>\r\n            <li v-for=\"page in totalPages\" :key=\"page\" class=\"page-item\" :class=\"{ active: page === currentPage }\">\r\n              <a class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</a>\r\n            </li>\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n              <a class=\"page-link\" @click=\"nextPage\">\r\n                <i class=\"fa fa-angle-right\"></i>\r\n                <span class=\"sr-only\">Next</span>\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"showModal\" class=\"modal fade show d-block\" tabindex=\"-1\" role=\"dialog\">\r\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <form class=\"modal-content\" @submit.prevent=\"completeTask()\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" style=\"color: black;\">{{ userData.name }}'s Patients</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\" @click=\"closeModal\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <h6>Family Members:</h6>\r\n            <div v-for=\"(family, index) in familyPatients\" :key=\"index\" class=\"d-flex align-items-center border rounded mb-2 py-2 px-3\">\r\n              <i class=\"ni ni-single-02\"></i>\r\n              <div class=\"ms-4\">\r\n                <div style=\"font-size: 9px;\">Current Family</div>\r\n                <div>{{ family.name }}</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"text-center my-4\">\r\n              <argon-button color=\"danger\">Add New Patient</argon-button>\r\n            </div>\r\n            \r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"submit\" class=\"btn btn-primary\">Confirm</button>\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">Cancel</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}