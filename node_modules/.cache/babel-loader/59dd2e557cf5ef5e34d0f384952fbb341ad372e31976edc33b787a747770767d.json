{"ast":null,"code":"import { onMounted, ref, computed } from \"vue\";\nimport { useRouter } from 'vue-router';\nimport { apiRequest } from '@/assets/js/apiRequest.js';\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport DeleteModal from \"./components/DeleteModal.vue\";\nconst perPage = 10; // Assuming 10 patients per page\n\n/// Function to calculate the total number of pages\n\nexport default {\n  __name: 'ForumList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    onMounted(() => {\n      getForumList();\n      // Extract the UUID from the URL query parameters\n      // const urlParams = new URLSearchParams(window.location.search);\n      // const patient_uuid = urlParams.get('uuid');\n\n      // if (patient_uuid) {\n      //   getPatientDetails(patient_uuid);\n      //   getVitalSignsList(patient_uuid);\n      // } else {\n      //     console.error('UUID not found in URL query parameters');\n      // };\n    });\n    const showDeleteModal = ref(false);\n    const deleteMessage = ref(\"Do you want to delete this forum?\");\n    const deleteForumID = ref('');\n    const showModalD = forum_uuid => {\n      showDeleteModal.value = true;\n      deleteForumID.value = forum_uuid;\n    };\n    const closeModal = () => {\n      showDeleteModal.value = false;\n    };\n    const forum = ref([]);\n    const getForumList = async () => {\n      try {\n        const response = await apiRequest(`https://staging.itbrightsolution.com/ixora_backend/public/api/v1/forum/fullList?search&new&status&paginate&per_page`);\n        forum.value = response.data;\n      } catch (error) {\n        console.error('Get Forum List Failed', error);\n        // Handle login error\n      }\n    };\n    const deleteForum = async forum_uuid => {\n      try {\n        const response = await apiRequest(`https://staging.itbrightsolution.com/ixora_backend/public/api/v1/forum/delete`, {\n          forum_uuid\n        });\n        console.log(\"Success\", response);\n        closeModal();\n        router.go();\n      } catch (error) {\n        console.error('Forum Data Delete Failed', error);\n      }\n    };\n    const currentPage = ref(1);\n    const totalPages = computed(() => Math.ceil(forum.value.length / perPage));\n\n    // Function to get the subset of patients to display on the current page\n    const forumDisplay = computed(() => {\n      const startIndex = (currentPage.value - 1) * perPage;\n      const endIndex = startIndex + perPage;\n      return forum.value.slice(startIndex, endIndex);\n    });\n\n    // Function to navigate to a specific page\n    const goToPage = page => {\n      currentPage.value = page;\n    };\n\n    // Function to navigate to the next page\n    const nextPage = () => {\n      if (currentPage.value < totalPages.value) {\n        currentPage.value++;\n      }\n    };\n\n    // Function to navigate to the previous page\n    const prevPage = () => {\n      if (currentPage.value > 1) {\n        currentPage.value--;\n      }\n    };\n    const __returned__ = {\n      router,\n      showDeleteModal,\n      deleteMessage,\n      deleteForumID,\n      showModalD,\n      closeModal,\n      forum,\n      getForumList,\n      deleteForum,\n      currentPage,\n      perPage,\n      totalPages,\n      forumDisplay,\n      goToPage,\n      nextPage,\n      prevPage,\n      onMounted,\n      ref,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get apiRequest() {\n        return apiRequest;\n      },\n      ArgonButton,\n      DeleteModal\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","computed","useRouter","apiRequest","ArgonButton","DeleteModal","perPage","router","getForumList","showDeleteModal","deleteMessage","deleteForumID","showModalD","forum_uuid","value","closeModal","forum","response","data","error","console","deleteForum","log","go","currentPage","totalPages","Math","ceil","length","forumDisplay","startIndex","endIndex","slice","goToPage","page","nextPage","prevPage"],"sources":["C:/Users/chink/Documents/GitHub/ixora-dashboard/src/views/ForumList.vue"],"sourcesContent":["<script setup>\r\nimport { onMounted, ref, computed } from \"vue\";\r\nimport { useRouter } from 'vue-router';\r\nimport { apiRequest } from '@/assets/js/apiRequest.js'; \r\n\r\nimport ArgonButton from \"@/components/ArgonButton.vue\";\r\n\r\nimport DeleteModal from \"./components/DeleteModal.vue\";\r\n\r\nconst router = useRouter();\r\n\r\nonMounted(() => {\r\n\r\n  getForumList();\r\n  // Extract the UUID from the URL query parameters\r\n  // const urlParams = new URLSearchParams(window.location.search);\r\n  // const patient_uuid = urlParams.get('uuid');\r\n\r\n  // if (patient_uuid) {\r\n  //   getPatientDetails(patient_uuid);\r\n  //   getVitalSignsList(patient_uuid);\r\n  // } else {\r\n  //     console.error('UUID not found in URL query parameters');\r\n  // };\r\n\r\n});\r\n\r\n\r\nconst showDeleteModal = ref(false);\r\nconst deleteMessage = ref(\"Do you want to delete this forum?\")\r\nconst deleteForumID = ref('');\r\n\r\nconst showModalD = (forum_uuid) => {\r\n  showDeleteModal.value = true;\r\n  deleteForumID.value = forum_uuid;\r\n};\r\n\r\nconst closeModal = () => {\r\n  showDeleteModal.value = false;\r\n};\r\n\r\n\r\nconst forum = ref([]);\r\n\r\nconst getForumList = async () => {\r\n  try {\r\n    const response = await apiRequest(`https://staging.itbrightsolution.com/ixora_backend/public/api/v1/forum/fullList?search&new&status&paginate&per_page`);\r\n    forum.value = response.data;\r\n\r\n  } catch (error) {\r\n    console.error('Get Forum List Failed', error);\r\n    // Handle login error\r\n  }\r\n};\r\n\r\nconst deleteForum = async (forum_uuid) => {\r\n  try {\r\n    const response = await apiRequest(`https://staging.itbrightsolution.com/ixora_backend/public/api/v1/forum/delete`, {forum_uuid});\r\n    console.log(\"Success\", response);\r\n    closeModal();\r\n    router.go();\r\n  } catch (error) {\r\n    console.error('Forum Data Delete Failed', error);\r\n  }\r\n};\r\n\r\nconst currentPage = ref(1);\r\n\r\nconst perPage = 10; // Assuming 10 patients per page\r\n\r\n\r\n/// Function to calculate the total number of pages\r\nconst totalPages = computed(() => Math.ceil(forum.value.length / perPage));\r\n\r\n// Function to get the subset of patients to display on the current page\r\nconst forumDisplay = computed(() => {\r\n  const startIndex = (currentPage.value - 1) * perPage;\r\n  const endIndex = startIndex + perPage;\r\n  return forum.value.slice(startIndex, endIndex);\r\n});\r\n\r\n\r\n\r\n// Function to navigate to a specific page\r\nconst goToPage = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\n// Function to navigate to the next page\r\nconst nextPage = () => {\r\n  if (currentPage.value < totalPages.value) {\r\n    currentPage.value++;\r\n  }\r\n};\r\n\r\n\r\n// Function to navigate to the previous page\r\nconst prevPage = () => {\r\n  if (currentPage.value > 1) {\r\n    currentPage.value--;\r\n  }\r\n};\r\n\r\n\r\n</script>\r\n<template>\r\n  <main class=\"container-fluid\">\r\n    <div class=\"py-4 container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n          <div class=\"card\">\r\n            <div class=\"card-header pb-0\">\r\n              <div class=\"d-flex align-items-center justify-content-between\">\r\n                <p class=\"mb-0 text-primary font-weight-bolder\">Forum List</p>\r\n                <a\r\n                  :href=\"`../create-forum`\"\r\n                >\r\n                  <argon-button >Add</argon-button>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            <div class=\"card-body px-0 pt-0 pb-2\">\r\n              <div class=\"table-responsive p-0\">\r\n                <table class=\"table align-items-center mb-0\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th\r\n                        class=\"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n                      >\r\n                        ID\r\n                      </th>\r\n                      <th\r\n                        class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n                      >\r\n                        Receiver Name\r\n                      </th>\r\n                      <!-- <th\r\n                        class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n                      >\r\n                        Media\r\n                      </th> -->\r\n                      <th\r\n                        class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n                      >\r\n                        Text\r\n                      </th>\r\n                      <th\r\n                        class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n                      >\r\n                        Created By\r\n                      </th>\r\n                      <th\r\n                        class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\"\r\n                      >\r\n                        Created At\r\n                      </th>\r\n                      <th class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\">Edit</th>\r\n                      <th class=\"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7\">\r\n                        Delete\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"(forum, index) in forumDisplay\" :key=\"index\">\r\n                      <td>\r\n                        <div class=\"d-flex px-2 py-1\">\r\n                          <div>\r\n                            <!-- <img\r\n                              src=\"../../assets/img/team-2.jpg\"\r\n                              class=\"avatar avatar-sm me-3\"\r\n                              alt=\"user1\"\r\n                            /> -->\r\n                          </div>\r\n                          <div class=\"d-flex flex-column justify-content-center\">\r\n                            <h6 class=\"badge badge-sm bg-gradient-primary\">{{ forum.id }}</h6>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td class=\"align-middle text-center text-sm\">\r\n                        <span class=\"text-secondary text-xs font-weight-bold\">{{ forum.receiver_uuid.name }}</span>\r\n                      </td>\r\n                      <!-- <td class=\"align-middle text-center text-sm\">\r\n                        <img\r\n                          :src=\"forum.media\"\r\n                          class=\"avatar avatar-sm me-3\"\r\n                          alt=\"user1\"\r\n                        />\r\n                      </td> -->\r\n                      <td class=\"align-middle text-center text-sm\">\r\n                        <span class=\"text-secondary text-xs font-weight-bold text-truncate\">{{ forum.text }}</span>\r\n                      </td>\r\n                      <td class=\"align-middle text-center\">\r\n                        <span class=\"text-secondary text-xs font-weight-bold\"\r\n                          >{{ forum.created_by.name }}</span\r\n                        >\r\n                      </td>\r\n                      <td class=\"align-middle text-center\">\r\n                        <span class=\"text-secondary text-xs font-weight-bold\"\r\n                          >{{ forum.created_at }}</span\r\n                        >\r\n                      </td>\r\n                      <td class=\"align-middle text-center\">\r\n                        <a\r\n                          :href=\"`../edit-forum/?uuid=${forum.uuid}`\"\r\n                          class=\"text-secondary font-weight-bold text-xs\"\r\n                          data-toggle=\"tooltip\"\r\n                          data-original-title=\"Edit user\"\r\n                          >\r\n                          <argon-button color=\"light\">\r\n                            <i class=\"fas fa-pen\"></i>\r\n                          </argon-button>\r\n                        </a>\r\n                      </td>\r\n                      <td class=\"align-middle text-center\">\r\n                        <a\r\n                          @click=\"showModalD(forum.uuid)\"\r\n                          class=\"text-secondary font-weight-bold text-xs\"\r\n                          data-toggle=\"tooltip\"\r\n                          data-original-title=\"Delete Forum\"\r\n                          >\r\n                          <argon-button color=\"danger\">\r\n                            <i class=\"fas fa-trash\"></i>\r\n                          </argon-button>\r\n                        </a>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <nav aria-label=\"Page navigation example\" class=\"my-3\">\r\n                  <ul class=\"pagination justify-content-center\">\r\n                    <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n                      <a class=\"page-link\" tabindex=\"-1\" @click=\"prevPage\">\r\n                        <i class=\"fa fa-angle-left\"></i>\r\n                        <span class=\"sr-only\">Previous</span>\r\n                      </a>\r\n                    </li>\r\n                    <li v-for=\"page in totalPages\" :key=\"page\" class=\"page-item\" :class=\"{ active: page === currentPage }\">\r\n                      <a class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</a>\r\n                    </li>\r\n                    <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n                      <a class=\"page-link\" @click=\"nextPage\">\r\n                        <i class=\"fa fa-angle-right\"></i>\r\n                        <span class=\"sr-only\">Next</span>\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </nav>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- Modal -->\r\n    <!-- <div v-if=\"showModal\" class=\"modal fade show d-block\" tabindex=\"-1\" role=\"dialog\">\r\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Delete Forum</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\" @click=\"closeModal\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <p>Are u sure to delete this forum ?</p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"deleteForum(deleteForumID)\">Confirm</button>\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">Cancel</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div> -->\r\n    <delete-modal :show-modal=\"showDeleteModal\" :delete-message=\"deleteMessage\" @close=\"showDeleteModal = false\" @delete-data=\"deleteForum(deleteForumID)\" />\r\n  </main>\r\n</template>\r\n\r\n<style>\r\n.text-truncate {\r\n  max-width: 200px;\r\n  display: inline-block;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n.modal {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}